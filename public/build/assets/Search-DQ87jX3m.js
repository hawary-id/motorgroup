import{j as e,a as h,r as p,W as F,Y as V}from"./app-BkyxIvsK.js";import{B as $}from"./Banner-Yi2S_Tra.js";import{C as G}from"./Checkbox-UQ9S9iOc.js";import{M as I,L as M,N as P}from"./index-D38FjwJ9.js";import{P as O}from"./ProductDetailCard-_hktfoyr.js";import{b as H,G as U,B as z,c as W,d as X}from"./GuestLayout-DIwmwcEh.js";import{I as c}from"./index-glLUsEuE.js";import{T as D}from"./TextInput-CIjbQC9e.js";import{T as q}from"./Title-B-DVFoi1.js";import{S as J,g as K,h as Q,i as Z,V as S,B as ee}from"./Constant-Dig9Qxfr.js";import{d as ae}from"./style-B7nZT0tD.js";import{S as m}from"./react-select.esm-CsXm77rl.js";import"./iconBase-Db5VmdPx.js";function se({image:x,name:i,price:l,discount:d,fuelType:s,transmission:r,driveType:u,steeringType:g,label:y,url:b}){return e.jsxs("div",{className:"flex flex-col overflow-hidden border rounded-md md:flex-row md:gap-6",children:[e.jsx("img",{src:x,alt:i,className:"object-cover w-full md:w-[24%]"}),e.jsxs("div",{className:"w-full p-3",children:[e.jsx("h3",{className:"mb-3 font-bold text-primary md:text-xl",children:i}),e.jsxs("div",{className:"font-semibold text-primary whitespace-nowrap",children:["$ ",l," USD FOB"]}),e.jsxs("div",{className:"mb-3 text-sm font-light text-gray-600",children:["$ ",d," USD FOB"]}),e.jsxs("div",{className:"flex flex-col w-full gap-2 py-3 font-light border-t md:gap-3 md:mb-5 md:flex-row",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(c,{className:"text-2xl"}),s]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(c,{className:"text-2xl"}),r]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(c,{className:"text-2xl"}),u]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(c,{className:"text-2xl"}),g]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{href:b,className:"w-full px-3 pt-[10px] pb-3 text-sm text-center text-white rounded bg-primary md:w-fit md:text-base hover:bg-gray-700",children:y}),e.jsx(h,{href:"",className:"px-[13px] py-[12px] md:py-[14px] text-center text-gray-700 bg-white border border-gray-500 rounded md:text-base whitespace-nowrap hover:bg-primary hover:text-white hover:border-primary",children:e.jsx(H,{})})]})]})]})}function ge({}){const[x,i]=p.useState(!0),[l,d]=p.useState([]),{data:s,setData:r,post:u,processing:g,errors:y,reset:b}=F({driveType:!1,type:"",brand:"",model:"",body:"",search:"",minYear:1970,maxYear:new Date().getFullYear(),yearRange:[1974,new Date().getFullYear()],display:"grid"}),v=J.map(a=>({value:a.value,label:a.name})),f=K.map(a=>({value:a.slug,label:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:a.image,alt:a.name,className:"inline-block w-8"}),a.name]})})),j=Q.filter(a=>a.brand.slug===s.brand).map(a=>({value:a.slug,label:a.name})),N=Z.map(a=>({value:a.name,label:a.name})),R=a=>{r("yearRange",a)};return p.useEffect(()=>{if(s.type||s.search||s.driveType||s.brand||s.model||s.yearRange||s.body){i(!0);const a=setTimeout(()=>{const o=S.filter(t=>{var w,C,T,L;const n=t.name.toLowerCase().includes(s.search.toLowerCase())||((w=t.brand)==null?void 0:w.slug.toLowerCase().includes(s.search.toLowerCase())),A=!s.type||((C=t.steering)==null?void 0:C.slug.toLowerCase())===s.type.toLowerCase(),Y=!s.brand||((T=t.brand)==null?void 0:T.slug.toLowerCase())===s.brand.toLowerCase(),B=!s.model||((L=t.model)==null?void 0:L.slug.toLowerCase())===s.model.toLowerCase(),E=!s.driveType||s.driveType&&t.drive_type.toLowerCase()==="4wd",_=(!s.yearRange[0]||t.year>=s.yearRange[0])&&t.year<=s.yearRange[1],k=!s.body||t.body_type.toLowerCase()===s.body.toLowerCase();return n&&A&&Y&&B&&E&&_&&k});d(o),i(!1)},750);return()=>clearTimeout(a)}else d(S)},[s.type,s.search,s.driveType,s.brand,s.model,s.yearRange,s.body]),e.jsxs(U,{children:[e.jsx(V,{title:"Search Your Vehicle"}),e.jsxs("div",{className:"w-full py-5",children:[e.jsxs("div",{className:"container px-3 mx-auto md:px-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"w-full mb-3 md:mb-5",placeholder:"Search by keyword",value:s.search||"",onChange:a=>r("search",a.target.value)}),e.jsx("div",{className:"absolute top-0 right-0 h-[38px] w-[37px] rounded-r inline-flex items-center justify-center  text-gray-600",children:s.search?e.jsx("button",{onClick:()=>r("search",""),children:e.jsx(I,{className:"text-lg hover:text-red-600"})}):e.jsx(z,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-5 md:gap-5 md:grid-cols-5",children:[e.jsx(m,{options:v,isClearable:!0,value:v.find(a=>a.value===s.type)||"",onChange:a=>r("type",a?a.value:""),placeholder:"Select by Type",className:"text-sm"}),e.jsx(m,{options:f,isClearable:!0,value:f.find(a=>a.value===s.brand)||"",onChange:a=>r("brand",a?a.value:""),placeholder:"Select by Make",className:"text-sm"}),e.jsx(m,{options:j,isClearable:!0,value:j.find(a=>a.value===s.model)||"",onChange:a=>r("model",a?a.value:""),placeholder:"Select by Model",className:"text-sm"}),e.jsx(m,{options:N,isClearable:!0,value:N.find(a=>a.value===s.body)||"",onChange:a=>r("body",a?a.value:""),placeholder:"Select by Body Type",className:"text-sm"}),e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(D,{className:"w-full mb-3 cursor-not-allowed disabled:bg-gray-100",value:`${s.yearRange[0]} - ${s.yearRange[1]}`,disabled:!0}),e.jsx(ae,{min:s.minYear,max:s.maxYear,defaultValue:[s.minYear,s.maxYear],onInput:R,className:"z-0",id:"range-slider-primary"})]}),e.jsxs("label",{className:"flex items-center mt-2",children:[e.jsx(G,{name:"driveType",checked:s.driveType,onChange:a=>r("driveType",a.target.checked)}),e.jsx("span",{className:"text-sm text-gray-600 ms-2",children:"4x4"})]})]})]}),e.jsxs("span",{className:"block font-semibold text-blue-600 md:hidden",children:[l.length," Grades Available"]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{href:route("search"),className:"px-5 pt-[10px] pb-3 text-sm text-white border rounded bg-primary hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-700",children:"Reset Filter"}),e.jsxs("span",{className:"hidden font-semibold text-blue-600 md:block",children:[l.length," Grades Available"]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-primary",children:"View"}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>r("display","grid"),className:`p-3 text-primary border border-r-0 rounded-l ${s.display==="grid"?"text-white bg-primary ":"hover:text-white active:text-white focus:text-white hover:bg-primary active:bg-primary focus:bg-primary"}`,children:e.jsx(W,{className:""})}),e.jsx("button",{onClick:()=>r("display","list"),className:`p-3 text-primary border border-l rounded-r ${s.display==="list"?"text-white bg-primary ":"hover:text-white active:text-white focus:text-white hover:bg-primary active:bg-primary focus:bg-primary"}`,children:e.jsx(X,{className:""})})]})]})})]})]}),x?e.jsx(M,{}):e.jsxs("div",{className:"container px-3 py-5 mx-auto md:px-0 md:mb-5 ",children:[e.jsx(q,{children:s.body===""?"All Body Type":s.body}),l.length>0?e.jsx("div",{className:`gap-3 md:gap-5 ${s.display==="grid"?"grid grid-cols-1 md:grid-cols-4":"flex flex-col"}`,children:l.map((a,o)=>{var t,n;return s.display==="grid"?e.jsx(O,{title:a.name,price:a.price,discount:a.discount,image:a.image[0].url,label:"View Vehicle",url:route("vehicle.detail",[(t=a.brand)==null?void 0:t.slug,a.slug])},a.name+o):s.display==="list"&&e.jsx(se,{image:a.image[0].url,name:a.name,price:a.price,discount:a.discount,fuelType:a.fuelT_type,transmission:a.transmission,driveType:a.drive_type,steeringType:a.steering.slug,label:"View Vehicle",url:route("vehicle.detail",[(n=a.brand)==null?void 0:n.slug,a.slug])},a.code+o)})}):e.jsx(P,{title:"No Product Found",subtitle:"Your search did not match any products"})]}),e.jsx($,{data:ee[0]})]})]})}export{ge as default};
